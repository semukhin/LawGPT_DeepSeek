# LawGPT Frontend

Это фронтенд-часть юридического чат-бота LawGPT, предоставляющая пользовательский интерфейс для взаимодействия с юридическим ассистентом.

## Особенности

- Многораундовые диалоги с сохранением контекста
- Форматирование ответов в Markdown
- Поддержка загрузки документов
- Аутентификация и верификация через email
- Адаптивный дизайн для мобильных и десктопных устройств
- Интеграция с бэкендом LawGPT API

## Структура проекта

```
└── frontend/
    ├── index.html           # Основной HTML-файл
    ├── login.html           # Страница входа
    ├── register.html        # Страница регистрации
    ├── verify.html          # Страница верификации
    ├── forgot-password.html # Страница восстановления пароля
    ├── reset-password.html  # Страница сброса пароля
    ├── styles.css           # Основные стили
    ├── app.js               # Основная логика приложения
    └── markdown.js          # Модуль обработки Markdown
```

## Установка и запуск

### Предварительные требования

- Веб-сервер (например, Apache, Nginx) или Node.js для локальной разработки
- Современный браузер с поддержкой ES6
- Бэкенд LawGPT API, запущенный и доступный

### Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/your-username/lawgpt-frontend.git
   cd lawgpt-frontend
   ```

2. Настройте URL API в файле `app.js`:
   ```javascript
   const config = {
       apiUrl: 'http://127.0.0.1:8000',  // Измените на ваш URL API
       // ...
   };
   ```

3. Запустите веб-сервер или используйте локальный сервер для разработки:
   ```bash
   # Например, с использованием Python
   python -m http.server
   
   # Или с использованием Node.js и http-server
   npx http-server
   ```

4. Откройте приложение в браузере:
   ```
   http://localhost:8000
   ```

## Интеграция с бэкендом

Фронтенд ожидает наличие следующих API-эндпоинтов:

- `POST /login` - Авторизация пользователя
- `POST /register` - Регистрация пользователя
- `POST /verify` - Верификация аккаунта
- `POST /forgot-password` - Запрос на восстановление пароля
- `POST /reset-password` - Сброс пароля
- `POST /logout` - Выход из системы
- `GET /profile` - Получение профиля пользователя
- `GET /chat/threads` - Получение списка тредов
- `POST /create_thread` - Создание нового треда
- `GET /messages/{thread_id}` - Получение сообщений треда
- `POST /chat/{thread_id}` - Отправка сообщения в тред
- `POST /upload_file` - Загрузка файла
- `GET /download/{filename}` - Скачивание файла

## Исправленные проблемы

В этой версии фронтенда исправлены следующие проблемы:

1. **Отсутствие ответа ассистента на первое сообщение пользователя** - теперь ответ отображается автоматически без необходимости обновления страницы.

2. **Форматирование текста ответа ассистента** - добавлена поддержка Markdown для форматирования ответов, включая заголовки, списки, таблицы, блоки кода и другие элементы.

3. **Двойное отображение сообщений** - исправлено поведение при повторном нажатии на чат, теперь сообщения не дублируются.

4. **Сортировка чатов в списке** - новые чаты теперь отображаются первыми в списке, а при создании нового чата автоматически происходит его выбор.

5. **Смешанное отображение сообщений** - исправлено поведение при переключении между чатами, теперь сообщения из разных чатов не смешиваются.

6. **Добавлены ссылки на социальные сети** - добавлены ссылки на VK и Telegram в футере.

## Особенности реализации

### Аутентификация

- Токены JWT хранятся в localStorage
- Временные токены для верификации хранятся отдельно
- Реализована защита маршрутов от несанкционированного доступа

### Работа с чатами

- Динамическая загрузка тредов и сообщений
- Автоматическая прокрутка к последнему сообщению
- Индикатор "Ассистент печатает" во время ожидания ответа

### Работа с файлами

- Предпросмотр выбранных файлов перед отправкой
- Загрузка файлов через FormData
- Поддержка ограничений по типу и размеру файлов

### UI/UX

- Анимации для плавных переходов
- Адаптивный дизайн для мобильных устройств
- Уведомления для обратной связи с пользователем

## Лицензия

Этот проект лицензирован под MIT License - см. файл [LICENSE](LICENSE) для деталей.
