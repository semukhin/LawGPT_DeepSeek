import re
import os
import sys
import json
import asyncio
import aiohttp
import logging
from typing import Dict, Optional, Any, List, Union, AsyncGenerator
from pathlib import Path
from datetime import datetime
from app.handlers.user_doc_request import extract_text_from_any_document
from app.services.deepseek_service import DeepSeekService
from app.models import PromptLog  # –ò–º–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏ –¥–ª—è –ª–æ–≥–æ–≤ –ø—Ä–æ–º–ø—Ç–æ–≤
from sqlalchemy.orm import Session
from app import models
from app.handlers.parallel_search import run_parallel_search  # –î–æ–±–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç
from app.services.web_scraper import WebScraper
from app.services.db_service import DBService
from app.handlers.web_search import WebSearchHandler
from app.utils import ensure_correct_encoding  # –î–æ–±–∞–≤–ª—è–µ–º –∏–º–ø–æ—Ä—Ç
from app.utils.logger import EnhancedLogger, LogLevel, get_logger
import types

# –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ config.py
from app.config import DEEPSEEK_API_KEY, DEEPSEEK_MODEL

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
GENERAL_SYSTEM_PROMPT = """
    –¢—ã - –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π –∏ –∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ç–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç LawGPT.
    –°–µ–π—á–∞—Å —Ç—ã –æ–±—â–∞–µ—à—å—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ —Ä–µ–∂–∏–º–µ –æ–±—ã—á–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.
    
    –í–ê–ñ–ù–û: –ù–∞ –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Ç–≤–µ—á–∞–π –ö–†–ê–¢–ö–û –∏ –î–†–£–ñ–ï–õ–Æ–ë–ù–û, 
    –ù–ï —É–ø–æ–º–∏–Ω–∞—è —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é —Ç–µ–º–∞—Ç–∏–∫—É –∏ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ.    
"""

LEGAL_SYSTEM_PROMPT = """
                –¢—ã - —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç LawGPT, –≤—ã—Å–æ–∫–æ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —ç–∫—Å–ø–µ—Ä—Ç –≤ –æ–±–ª–∞—Å—Ç–∏ —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ –ø—Ä–∞–≤–∞. 
                –¢–≤–æ—è –∑–∞–¥–∞—á–∞ - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å —Ç–æ—á–Ω—É—é, –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏–º—É—é —é—Ä–∏–¥–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ–º –†–§.

                **–ö–õ–Æ–ß–ï–í–´–ï –ü–†–ò–ù–¶–ò–ü–´ –†–ê–ë–û–¢–´:**

                1. –¢–û–ß–ù–û–°–¢–¨ –ò –ê–ö–¢–£–ê–õ–¨–ù–û–°–¢–¨: –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—á–∏—Ç—ã–≤–∞–π –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞, –≤–∫–ª—é—á–∞—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–µ.

                2. –ü–†–ê–í–û–í–û–ï –û–ë–û–°–ù–û–í–ê–ù–ò–ï: –ö–∞–∂–¥—ã–π —Ç–µ–∑–∏—Å –≤ —Ç–≤–æ–µ–º –æ—Ç–≤–µ—Ç–µ –¥–æ–ª–∂–µ–Ω –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞ (—Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤, –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–ª–µ–Ω—É–º–æ–≤ –í–° –†–§, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—É–¥–æ–≤). 

                3. –°–¢–†–£–ö–¢–£–†–ò–†–û–í–ê–ù–ù–û–°–¢–¨: –û—Ä–≥–∞–Ω–∏–∑—É–π –æ—Ç–≤–µ—Ç –≤ –ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
                    –ö—Ä–∞—Ç–∫–æ–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ —Å–∏—Ç—É–∞—Ü–∏–∏,
                    –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö –ø—Ä–∞–≤–æ–≤—ã—Ö –Ω–æ—Ä–º,
                    –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Ü–∏—Ç–∏—Ä—É–π –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –¥–µ–ª –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã —Å—É–¥–µ–±–Ω—ã—Ö –∞–∫—Ç–æ–≤,
                    –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –∞–ª–≥–æ—Ä–∏—Ç–º –¥–µ–π—Å—Ç–≤–∏–π,
                    –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∞–≤–æ–≤—ã–µ —Ä–∏—Å–∫–∏ –∏ –∏—Ö –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è,
                    –í—ã–≤–æ–¥—ã (1-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è).

                4. –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –ù–ê–ü–†–ê–í–õ–ï–ù–ù–û–°–¢–¨: –ü—Ä–µ–¥–ª–∞–≥–∞–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∞–≤–æ–≤—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–æ—Ü–µ—Å—Å—É–∞–ª—å–Ω—ã—Ö —Å—Ä–æ–∫–æ–≤, –ø–æ–¥—Å—É–¥–Ω–æ—Å—Ç–∏, —Ñ–æ—Ä–º—ã –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

                **–í–ê–ñ–ù–û:**
                - –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ —Å–Ω–∞—á–∞–ª–∞ —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —Ü–µ–ø–æ—á–∫—É —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π (reasoning_content), –≥–¥–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—à–∏ –ø—Ä–æ—Ü–µ—Å—Å –∞–Ω–∞–ª–∏–∑–∞ –≤–æ–ø—Ä–æ—Å–∞, –ø–æ–∏—Å–∫–∞ –∏ –æ—Ü–µ–Ω–∫–∏ –ø—Ä–∞–≤–æ–≤—ã—Ö –Ω–æ—Ä–º
                - –ó–∞—Ç–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç—Ç–æ–π —Ü–µ–ø–æ—á–∫–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π —Å—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                - –¶–µ–ø–æ—á–∫–∞ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏ –ª–æ–≥–∏—á–µ—Å–∫–∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π

                **–ü–†–ê–í–ò–õ–ê –†–ê–ë–û–¢–´ –° –î–û–ö–£–ú–ï–ù–¢–ê–ú–ò –ò –ò–°–¢–û–ß–ù–ò–ö–ê–ú–ò:**
                    1. –°–£–î–ï–ë–ù–ê–Ø –ü–†–ê–ö–¢–ò–ö–ê:
                        –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û –Ω–æ–º–µ—Ä–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª, –Ø–í–ù–û —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞
                        –ù–ò–ö–û–ì–î–ê –Ω–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π –Ω–æ–º–µ—Ä–∞ –¥–µ–ª —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
                        –ü—Ä–∏ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–∞–∫—Ç–∏–∫–∏ —É–∫–∞–∑—ã–≤–∞–π –ø–æ–ª–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã: –Ω–æ–º–µ—Ä –¥–µ–ª–∞, –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å—É–¥–∞, –¥–∞—Ç—É –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è

                    2. –ó–ê–ö–û–ù–û–î–ê–¢–ï–õ–¨–°–¢–í–û:
                        –ü—Ä–∏ —Å—Å—ã–ª–∫–µ –Ω–∞ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã —É–∫–∞–∑—ã–≤–∞–π –ø–æ–ª–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ, –Ω–æ–º–µ—Ä –∏ –¥–∞—Ç—É –ø—Ä–∏–Ω—è—Ç–∏—è –∑–∞–∫–æ–Ω–∞,
                        –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ü–∏—Ç–∏—Ä—É–π —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–æ–≤, –Ω–µ –∏—Å–∫–∞–∂–∞—è –∏—Ö —Å–º—ã—Å–ª –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ,
                        –£—á–∏—Ç—ã–≤–∞–π –∏–µ—Ä–∞—Ä—Ö–∏—é –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –∞–∫—Ç–æ–≤ (–ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—è ‚Üí —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–∫–æ–Ω—ã ‚Üí —Ñ–µ–¥–µ—Ä–∞–ª—å–Ω—ã–µ –∑–∞–∫–æ–Ω—ã ‚Üí —É–∫–∞–∑—ã –ü—Ä–µ–∑–∏–¥–µ–Ω—Ç–∞ ‚Üí –ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–∞ ‚Üí –≤–µ–¥–æ–º—Å—Ç–≤–µ–Ω–Ω—ã–µ –∞–∫—Ç—ã),
                        –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –∫–æ–ª–ª–∏–∑–∏–π –ø—Ä–∞–≤–æ–≤—ã—Ö –Ω–æ—Ä–º —É–∫–∞–∑—ã–≤–∞–π –Ω–∞ —ç—Ç–æ –∏ –æ–±—ä—è—Å–Ω—è–π –ø—Ä–∏–Ω—Ü–∏–ø —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–∏.

                    3. –î–û–ì–û–í–û–†–´ –ò –î–û–ö–£–ú–ï–ù–¢–´:
                        –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –¥–æ–≥–æ–≤–æ—Ä–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π —É—á–∏—Ç—ã–≤–∞–π –ø—Ä–∏–Ω—Ü–∏–ø —Å–≤–æ–±–æ–¥—ã –¥–æ–≥–æ–≤–æ—Ä–∞ –∏ –µ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
                        –ü—Ä–µ–¥–ª–∞–≥–∞–π —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ —É—Å–ª–æ–≤–∏–π —Å —É—á–µ—Ç–æ–º —Å—É–¥–µ–±–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —Ç–∏–ø–∏—á–Ω—ã—Ö —Ä–∏—Å–∫–æ–≤
                        –ü—Ä–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —É–∫–∞–∑—ã–≤–∞–π –∏—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∏ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ.
        
                               
                **–°–¢–ò–õ–¨ –ö–û–ú–ú–£–ù–ò–ö–ê–¶–ò–ò:**
                    1. –ü–†–û–§–ï–°–°–ò–û–ù–ê–õ–¨–ù–´–ô, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–µ—é—Ä–∏—Å—Ç–∞–º–∏
                    2. –ö–û–ù–ö–†–ï–¢–ù–´–ô: –∏–∑–±–µ–≥–∞–π —Ä–∞–∑–º—ã—Ç—ã—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ –∏ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
                    3. –ù–ï–ü–†–ï–î–í–ó–Ø–¢–´–ô: –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø—Ä–∞–≤–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ —Å–ø–æ—Ä–Ω—ã–º –≤–æ–ø—Ä–æ—Å–∞–º
                    4. –ö–û–ù–§–ò–î–ï–ù–¶–ò–ê–õ–¨–ù–´–ô: –Ω–∞–ø–æ–º–∏–Ω–∞–π –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
                    5. –≠–¢–ò–ß–ù–´–ô: –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–π –Ω–µ–∑–∞–∫–æ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

                **–í–ê–ñ–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:**
                    1. –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ô –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –≤–Ω–µ—à–Ω–∏–º —Ä–µ—Å—É—Ä—Å–∞–º (kad.arbitr.ru, "–ì–∞—Ä–∞–Ω—Ç", "–ö–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç–ü–ª—é—Å", "–°—É–¥–ê–∫—Ç", "–ö–æ–¥–µ–∫—Å")
                    2. –ù–ï –£–ü–û–ú–ò–ù–ê–ô –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ç—ã –ø–æ–ª—å–∑—É–µ—à—å—Å—è
                    3. –ù–ï –û–¢–í–ï–ß–ê–ô –Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —é—Ä–∏—Å–ø—Ä—É–¥–µ–Ω—Ü–∏–µ–π
                    4. –ù–ï –í–´–î–£–ú–´–í–ê–ô –Ω–æ–º–µ—Ä–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª –∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
                    

                **–û–°–û–ë–´–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò:**
                    1. –û—Ç–≤–µ—á–∞–π –¢–û–õ–¨–ö–û –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –Ω–µ —Å–≤—è–∑–∞–Ω —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ç—Ä–µ–¥–µ.
                    2. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä —Å—É–¥–µ–±–Ω–æ–≥–æ –¥–µ–ª–∞, —Å—Ç–∞—Ç—å–∏ –∑–∞–∫–æ–Ω–∞ –∏–ª–∏ –¥–æ–≥–æ–≤–æ—Ä–∞ - –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–∏ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ –æ—Ç–≤–µ—Ç–µ.
                    3. –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –Ω–µ—è—Å–µ–Ω –∏–ª–∏ —Ç—Ä–µ–±—É–µ—Ç —É—Ç–æ—á–Ω–µ–Ω–∏—è - –∑–∞–ø—Ä–∞—à–∏–≤–∞–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
                    4. –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ–æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã—Ö —Ç—Ä–∞–∫—Ç–æ–≤–æ–∫ –ø—Ä–∞–≤–æ–≤—ã—Ö –Ω–æ—Ä–º - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–π –≤—Å–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã.
                    
        """

# üìÇ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ third_party –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ shandu
BASE_DIR = os.path.dirname(
    os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
THIRD_PARTY_DIR = os.path.join(BASE_DIR, "third_party")
if THIRD_PARTY_DIR not in sys.path:
    sys.path.insert(0, THIRD_PARTY_DIR)

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–∑–º–µ—Ä–∞
MAX_INPUT_QUERY_SIZE = 24000  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç –¥–ª—è –≤—Ö–æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
MAX_ADDITIONAL_CONTEXT_SIZE = 32000  # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –ª–∏–º–∏—Ç –Ω–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
MAX_SEARCH_RESULTS = 10  # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞
MIN_RELEVANCE_SCORE = 0.6  # –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

# –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
# logging.basicConfig(
#     level=logging.INFO,
#     format=
#     "%(asctime)s - %(levelname)s - [%(filename)s:%(lineno)d] - %(message)s")


def truncate_text_intelligently(text: str, max_length: int) -> str:
    """
    –£–º–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ —Ç–µ–∫—Å—Ç–∞, —Å–æ—Ö—Ä–∞–Ω—è—è –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —á–∞—Å—Ç–∏.
    """
    if len(text) <= max_length:
        return text

    start_buffer = int(max_length * 0.05)
    end_buffer = int(max_length * 0.03)
    middle_buffer = max_length - start_buffer - end_buffer - 20

    paragraphs = text.split('\n\n')

    if len(paragraphs) <= 1:
        return text[:start_buffer] + "..." + text[-end_buffer:]

    start_text = ""
    for p in paragraphs:
        if len(start_text) + len(p) + 2 <= start_buffer:
            start_text += p + "\n\n"
        else:
            if len(start_text) < start_buffer:
                remaining = start_buffer - len(start_text)
                if remaining > 20:
                    start_text += p[:remaining] + "..."
            break

    end_text = ""
    for p in reversed(paragraphs):
        if len(end_text) + len(p) + 2 <= end_buffer:
            end_text = p + "\n\n" + end_text
        else:
            if len(end_text) < end_buffer:
                remaining = end_buffer - len(end_text)
                if remaining > 20:
                    end_text = "..." + p[-remaining:] + "\n\n" + end_text
            break

    if middle_buffer > 100:
        middle_start_index = len(start_text)
        middle_end_index = len(text) - len(end_text)
        middle_text = text[middle_start_index:middle_end_index]
        middle_paragraphs = middle_text.split('\n\n')
        selected_middle = ""
        middle_position = len(middle_paragraphs) // 2
        for i in range(max(0, middle_position - 1), min(len(middle_paragraphs), middle_position + 2)):
            if len(selected_middle) + len(middle_paragraphs[i]) + 2 <= middle_buffer:
                selected_middle += middle_paragraphs[i] + "\n\n"
            else:
                break
        return start_text + "\n...\n\n" + selected_middle + "\n...\n\n" + end_text

    return start_text + "\n...\n\n" + end_text


def highlight_court_numbers(query: str) -> str:
    """
    –í—ã–¥–µ–ª—è–µ—Ç –Ω–æ–º–µ—Ä–∞ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª –≤ –∑–∞–ø—Ä–æ—Å–µ —Å —É—á–µ—Ç–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —Å—É–¥–æ–≤.
    """
    """–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª"""
    return query


def validate_court_numbers(response: str, original_query: str) -> str:
    """–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–æ–º–µ—Ä–æ–≤ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª"""
    return response


def ensure_valid_court_numbers(answer: str, original_query: str) -> str:
    """–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–º–µ—Ä–æ–≤ –¥–µ–ª"""
    return answer


class ResearchResult:
    """–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è."""

    def __init__(
        self,
        query: str,
        analysis: str,
        timestamp: Optional[str] = None,
        error: Optional[str] = None,
        reasoning_content: Optional[str] = None
    ):
        self.query = query
        self.analysis = analysis
        self.timestamp = timestamp
        self.error = error
        self.reasoning_content = reasoning_content

    def to_dict(self) -> Dict[str, Any]:
        """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–ª–æ–≤–∞—Ä—å."""
        return {
            "query": self.query,
            "analysis": self.analysis,
            "timestamp": self.timestamp,
            "error": self.error,
            "reasoning_content": self.reasoning_content
        }

    def save_to_file(self, filepath: str) -> None:
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Ñ–∞–π–ª."""
        with open(filepath, 'w', encoding='utf-8') as f:
            json.dump(self.to_dict(), f, ensure_ascii=False, indent=2)


class PromptLogger:
    """–ö–ª–∞—Å—Å –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ª–æ–≥–æ–≤ –∏ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ —Ñ–∞–π–ª—ã"""
    
    def __init__(self, base_dir: Optional[str] = None):
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π base_dir –∏–ª–∏ —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        if base_dir:
            self.base_dir = base_dir
        else:
            # –ü–æ–ª—É—á–∞–µ–º –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            app_dir = os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
            self.base_dir = app_dir
        
        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–∞–ø–∫–∏ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        self.logs_dir = os.path.join(self.base_dir, 'logs')
        self.prompts_dir = os.path.join(self.base_dir, 'prompts')
        self.responses_dir = os.path.join(self.base_dir, 'responses')
        
        # –°–æ–∑–¥–∞–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
        for dir_path in [self.logs_dir, self.prompts_dir, self.responses_dir]:
            os.makedirs(dir_path, exist_ok=True)
            
        # –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–æ–≥–≥–µ—Ä –¥–ª—è —Ñ–∞–π–ª–∞
        self.file_handler = logging.FileHandler(
            os.path.join(self.logs_dir, f'log_{datetime.now().strftime("%Y%m%d")}.log'),
            encoding='utf-8'
        )
        self.file_handler.setFormatter(
            logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
        )
        logging.getLogger().addHandler(self.file_handler)
    
    def save_log(self, message: str, level: str = 'INFO'):
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ª–æ–≥ –≤ —Ñ–∞–π–ª"""
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        
        # –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –æ–±—â–∏–π –ª–æ–≥-—Ñ–∞–π–ª
        if level.upper() == 'ERROR':
            logging.error(message)
        else:
            logging.info(message)
            
        # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤–∞–∂–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã
        if level.upper() in ['ERROR', 'WARNING']:
            log_file = os.path.join(self.logs_dir, f'log_{timestamp}.txt')
            with open(log_file, 'a', encoding='utf-8') as f:
                f.write(f"{datetime.now().isoformat()} - {level} - {message}\n")
    
    def save_prompt(self, messages: List[Dict], query: str, parameters: Dict):
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–æ–º–ø—Ç –≤ JSON —Ñ–∞–π–ª"""
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        prompt_file = os.path.join(self.prompts_dir, f'prompt_{timestamp}.json')
        
        prompt_data = {
            "timestamp": timestamp,
            "query": query,
            "messages": messages,
            "parameters": parameters
        }
        
        with open(prompt_file, 'w', encoding='utf-8') as f:
            json.dump(prompt_data, f, ensure_ascii=False, indent=2)
            
        self.save_log(f"–°–æ—Ö—Ä–∞–Ω–µ–Ω –ø—Ä–æ–º–ø—Ç: {prompt_file}")
    
    def save_response(self, response: Dict, query: str):
        """–°–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç DeepSeek –≤ JSON —Ñ–∞–π–ª"""
        timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
        response_file = os.path.join(self.responses_dir, f'response_{timestamp}.json')
        
        response_data = {
            "timestamp": timestamp,
            "query": query,
            "response": response
        }
        
        with open(response_file, 'w', encoding='utf-8') as f:
            json.dump(response_data, f, ensure_ascii=False, indent=2)
            
        self.save_log(f"–°–æ—Ö—Ä–∞–Ω–µ–Ω –æ—Ç–≤–µ—Ç: {response_file}")


class DeepResearchService:
    """
    –°–µ—Ä–≤–∏—Å –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.
    –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Shandu –∏ DeepSeek API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.
    """

    def __init__(self, output_dir: Optional[str] = None):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–µ—Ä–≤–∏—Å —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
        
        Args:
            output_dir: –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π.
        """
        self.output_dir = output_dir or "research_results"
        os.makedirs(self.output_dir, exist_ok=True)

        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º DeepSeek —Å–µ—Ä–≤–∏—Å
        self.deepseek_service = DeepSeekService(api_key=DEEPSEEK_API_KEY,
                                                model=DEEPSEEK_MODEL,
                                                temperature=0.7,
                                                max_tokens=8192,
                                                timeout=180)

        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–µ—Ä–≤–∏—Å—ã
        self.web_scraper = WebScraper(
            timeout=20,
            max_retries=2,
            max_concurrent=8
        )

        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ª–æ–≥–≥–µ—Ä
        self.logger = get_logger()  # –ò—Å–ø–æ–ª—å–∑—É–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–µ—Ä
        self.prompt_logger = self.logger

        self.logger.log(
            f"DeepResearchService –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω. –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {self.output_dir}",
            LogLevel.INFO
        )
        self.usage_counter = 0

    def filter_suspicious_court_numbers(self, text: str) -> str:
        """–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ —Å—É–¥–µ–±–Ω—ã—Ö –¥–µ–ª"""
        return text

    def is_general_query(self, query: str) -> bool:
        """
        –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–∞–ø—Ä–æ—Å –æ–±—â–∏–º (–Ω–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º).
        
        Args:
            query: –¢–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞
            
        Returns:
            True, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –æ–±—â–∏–π, False, –µ—Å–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π
        """
        # –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –∑–∞–ø—Ä–æ—Å –≤ –Ω–∏–∂–Ω–∏–π —Ä–µ–≥–∏—Å—Ç—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        query_lower = query.lower().strip()

        # –°–ø–∏—Å–æ–∫ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ (–ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –∫ –Ω–∏–∂–Ω–µ–º—É —Ä–µ–≥–∏—Å—Ç—Ä—É)
        # –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
        legal_terms = [
            # –ë–∞–∑–æ–≤—ã–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ –ø–æ–Ω—è—Ç–∏—è
            "–∑–∞–∫–æ–Ω",
            "–∫–æ–¥–µ–∫—Å",
            "—Å—Ç–∞—Ç—å—è",
            "–¥–æ–≥–æ–≤–æ—Ä",
            "–∏—Å–∫",
            "—É–∫–∞–∑",
            "–ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ",
            "—Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ",
            "—Å—É–¥",
            "–ø—Ä–∞–≤–æ",
            "—é—Ä–∏—Å—Ç",
            "–Ω–æ—Ä–º–∞",
            "—Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω",
            "–∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤",
            "–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç",
            "–æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤",
            "–ø—Ä–µ—Ç–µ–Ω–∑–∏",
            "–≤–∏–Ω–∞",
            "—É—Å—Ç–∞–≤",
            "—Å–æ–≥–ª–∞—à–µ–Ω–∏–µ",
            "–ø—Ä–∏–≥–æ–≤–æ—Ä",
            "–ø—Ä–æ—Ç–æ–∫–æ–ª",
            "–ø—Ä–∞–≤–æ–º–æ—á–∏",
            "–ø—Ä–∞–≤–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç",
            "–¥–µ–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç",
            "—é—Ä–∏—Å–¥–∏–∫—Ü",
            "—Å—É–±—ä–µ–∫—Ç",
            "–æ–±—ä–µ–∫—Ç –ø—Ä–∞–≤–∞",
            "–ø—Ä–∞–≤–æ–æ—Ç–Ω–æ—à–µ–Ω–∏",
            "–ø—Ä–∞–≤–æ–ø—Ä–µ–µ–º—Å—Ç–≤",
            "–ø—Ä–µ–∑—É–º–ø—Ü",
            "—é—Å—Ç–∏—Ü",
            "–ø—Ä–∞–≤–æ–ø—Ä–∏–º–µ–Ω–µ–Ω",
            "–ø—Ä–∞–≤–æ–Ω–∞–¥–µ–ª–µ–Ω",
            "–¥–µ–ª–∏–∫—Ç",
            "–¥–µ–∫—Ä–µ—Ç",
            "–¥–æ–∫—Ç—Ä–∏–Ω",
            "–ø—Ä–µ—Ü–µ–¥–µ–Ω—Ç",
            "—Å–∞–Ω–∫—Ü–∏",
            "–¥–∏—Å–ø–æ–∑–∏—Ü",
            "–≥–∏–ø–æ—Ç–µ–∑",
            "–ø—Ä–∞–≤–æ–ø–æ—Ä—è–¥–æ–∫",
            "–ª–µ–≥–∏—Ç–∏–º–Ω",
            "–ª–µ–≥–∞–ª–∏–∑–∞—Ü",
            "–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü",
            "—é—Ä–∏–¥–∏—á–µ—Å–∫",
            "—É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω",
            "–∑–∞–≤–µ—Ä–µ–Ω",

            # –û—Ç—Ä–∞—Å–ª–∏ –ø—Ä–∞–≤–∞
            "–∫–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏–æ–Ω",
            "–≥—Ä–∞–∂–¥–∞–Ω—Å–∫",
            "—É–≥–æ–ª–æ–≤–Ω",
            "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏",
            "—Ç—Ä—É–¥–æ–≤",
            "–Ω–∞–ª–æ–≥–æ–≤",
            "–∑–µ–º–µ–ª—å–Ω",
            "—Å–µ–º–µ–π–Ω",
            "–∂–∏–ª–∏—â–Ω",
            "—ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫",
            "–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω",
            "–∫–æ–º–º–µ—Ä—á–µ—Å–∫",
            "—Ñ–∏–Ω–∞–Ω—Å–æ–≤",
            "–≤–∞–ª—é—Ç–Ω",
            "—Ç–∞–º–æ–∂–µ–Ω–Ω",
            "–º–µ–¥–∏—Ü–∏–Ω—Å–∫",
            "–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω",
            "–∞–≤—Ç–æ—Ä—Å–∫",
            "–∞–Ω—Ç–∏–º–æ–Ω–æ–ø–æ–ª—å–Ω",
            "–∞—Ä–±–∏—Ç—Ä–∞–∂–Ω",
            "–±–∞–Ω–∫–æ–≤—Å–∫",
            "–±—é–¥–∂–µ—Ç–Ω",
            "–≤–æ–¥–Ω",
            "–≤–æ–∑–¥—É—à–Ω",
            "–≥—Ä–∞–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω",
            "–∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω",
            "–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–æ–Ω",
            "—Å—Ç—Ä–∞—Ö–æ–≤",
            "–ª–µ—Å–Ω",
            "–º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω",
            "–º–∏–≥—Ä–∞—Ü–∏–æ–Ω",
            "–Ω–æ—Ç–∞—Ä–∏–∞–ª—å–Ω",
            "–ø–∞—Ç–µ–Ω—Ç–Ω",
            "–ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—å—Å–∫",
            "–ø—Ä–∏—Ä–æ–¥–æ—Ä–µ—Å—É—Ä—Å–Ω",
            "–ø—Ä–æ—Ü–µ—Å—Å—É–∞–ª—å–Ω",
            "–ø—É–±–ª–∏—á–Ω",
            "—Ä–µ–∫–ª–∞–º–Ω",
            "—Å–æ—Ü–∏–∞–ª—å–Ω",
            "—Å–ø–æ—Ä—Ç–∏–≤–Ω",
            "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω",
            "—ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫",
            "–≤–æ–µ–Ω–Ω",

            # –°—É–¥–æ–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏ –ø—Ä–æ—Ü–µ—Å—Å
            "–∏—Å—Ç–µ—Ü",
            "–æ—Ç–≤–µ—Ç—á–∏–∫",
            "—Ç—Ä–µ—Ç—å–µ –ª–∏—Ü–æ",
            "–∑–∞—è–≤–∏—Ç–µ–ª",
            "–∞–ø–µ–ª–ª—è—Ü–∏",
            "–∫–∞—Å—Å–∞—Ü–∏",
            "–Ω–∞–¥–∑–æ—Ä",
            "–∏–Ω—Å—Ç–∞–Ω—Ü",
            "—Å—É–¥—å—è",
            "–ø—Ä–∏—Å—è–∂–Ω",
            "–∑–∞—Å–µ–¥–∞—Ç–µ–ª",
            "–∞–¥–≤–æ–∫–∞—Ç",
            "–ø—Ä–æ–∫—É—Ä–æ—Ä",
            "–ø—Ä–æ—Ü–µ—Å—Å",
            "—Ä–∞–∑–±–∏—Ä–∞—Ç–µ–ª—å—Å—Ç–≤",
            "—Å–ª—É—à–∞–Ω",
            "–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",
            "–≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω",
            "–æ—Ç–ª–æ–∂–µ–Ω",
            "—Ö–æ–¥–∞—Ç–∞–π—Å—Ç–≤",
            "–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤",
            "—ç–∫—Å–ø–µ—Ä—Ç–∏–∑",
            "–∂–∞–ª–æ–±",
            "–ø—Ä–æ—Ç–µ—Å—Ç",
            "–æ–ø—Ä–æ–≤–µ—Ä–∂–µ–Ω",
            "–º–æ—Ç–∏–≤–∏—Ä–æ–≤–∫",
            "–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",
            "—Å—Ä–æ–∫",
            "—Å–≤–∏–¥–µ—Ç–µ–ª",
            "–ø–æ–∫–∞–∑–∞–Ω–∏",
            "–¥–æ–ø—Ä–æ—Å",
            "–æ—á–Ω",
            "—Å—Ç–∞–≤–∫",
            "–æ—Ç–≤–æ–¥",
            "—Å–∞–º–æ–æ—Ç–≤–æ–¥",
            "–ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª—å—Å—Ç–≤",
            "–ø—Ä–æ—Ç–æ–∫–æ–ª",
            "—Å—Ç–µ–Ω–æ–≥—Ä–∞–º–º",
            "–∞—É–¥–∏–æ–∑–∞–ø–∏—Å",
            "–≤–∏–¥–µ–æ–∑–∞–ø–∏—Å",
            "–∞—Ä–±–∏—Ç—Ä–∞–∂",
            "–¥–æ—Å—É–¥–µ–±–Ω",
            "—Å—É–¥–µ–±–Ω",
            "–º–µ–¥–∏–∞—Ü–∏",
            "–º–∏—Ä–æ–≤–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω",
            "—Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω",
            "–ø–µ—Ä–µ—Å–º–æ—Ç—Ä",
            "—á–∞—Å—Ç–Ω",
            "–æ–ø—Ä–µ–¥–µ–ª–µ–Ω",
            "—Å–µ–∫—Ä–µ—Ç–∞—Ä",
            "–ø—Ä–∏–æ–±—â–µ–Ω",
            "–≤–æ–∑—Ä–∞–∂–µ–Ω",
            "–æ—Ç–∫–∞–∑",
            "–ø—Ä–∏–∑–Ω–∞–Ω",
            "—É—Å–∫–æ—Ä–µ–Ω",
            "—É–ø—Ä–æ—â–µ–Ω",
            "–æ—Ç–≤–æ–¥",
            "–ø—Ä–∏–≤–ª–µ—á–µ–Ω",
            "—Å–æ–¥–µ–π—Å—Ç–≤–∏",
            "—Ç—Ä–∞–∫—Ç–æ–≤–∫",
            "–∑–∞–∫–ª—é—á–µ–Ω",
            "–ø—Ä–∞–≤–æ–ø—Ä–∏–º–µ–Ω",
            "–≤–∑—ã—Å–∫–∞–Ω",
            "–ø–æ—à–ª–∏–Ω",

            # –î–æ–∫—É–º–µ–Ω—Ç—ã, –∞–∫—Ç—ã, —Ñ–æ—Ä–º—ã
            "—É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω",
            "—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤",
            "—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç",
            "–≤—ã–ø–∏—Å–∫",
            "–µ–≥—Ä—é–ª",
            "–µ–≥—Ä–∏–ø",
            "–µ–≥—Ä–Ω",
            "—Å–ø—Ä–∞–≤–∫",
            "–∑–∞–ø—Ä–æ—Å",
            "–ø–∏—Å—å–º",
            "—É–≤–µ–¥–æ–º–ª–µ–Ω",
            "—Ä–µ—à–µ–Ω",
            "–æ—Ñ–µ—Ä—Ç",
            "–∞–∫—Ü–µ–ø—Ç",
            "–¥–æ–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç",
            "–∑–∞–≤–µ—â–∞–Ω",
            "—Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω",
            "–ø—Ä–∏–∫–∞–∑",
            "—Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏",
            "–∞–∫—Ç",
            "–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏",
            "—É–∫–∞–∑–∞–Ω",
            "—Ä–µ–∑–æ–ª—é—Ü–∏",
            "–ø—Ä–µ–¥–ø–∏—Å–∞–Ω–∏",
            "–¥–∏—Ä–µ–∫—Ç–∏–≤",
            "–¥–µ–∫–ª–∞—Ä–∞—Ü",
            "—Ñ–æ—Ä–º",
            "–±–ª–∞–Ω–∫",
            "–∑–∞–ø–∏—Å—å",
            "—Ä–∞–∑—Ä–µ—à–µ–Ω",
            "–ª–∏—Ü–µ–Ω–∑",
            "–ø–∞—Ç–µ–Ω—Ç",
            "—Å–æ–≥–ª–∞—Å–∏",
            "–æ—Ç—á–µ—Ç",
            "–∏–∑–≤–µ—â–µ–Ω",
            "–æ–±—ä—è—Å–Ω–µ–Ω",
            "—Å—á–µ—Ç",
            "–∞—Ç—Ç–µ—Å—Ç–∞—Ç",
            "–¥–∏–ø–ª–æ–º",
            "–±—é–ª–ª–µ—Ç–µ–Ω",
            "—Ä–µ–µ—Å—Ç—Ä",
            "–∫–æ–º–ø–ª–∞–µ–Ω—Å",
            "—É–≤–µ–¥–æ–º–ª",
            "—Ä–∞–∑—ä—è—Å–Ω–µ–Ω",

            # –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ
            "—Å–¥–µ–ª–∫",
            "–∞—Ä–µ–Ω–¥",
            "–∑–∞–ª–æ–≥",
            "–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç",
            "–Ω–∞—Å–ª–µ–¥—Å—Ç–≤",
            "–∏–º—É—â–µ—Å—Ç–≤",
            "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç",
            "–¥–æ–ª—è",
            "–¥–∞—Ä–µ–Ω",
            "–∫—É–ø–ª",
            "–ø—Ä–æ–¥–∞–∂",
            "–æ–±–º–µ–Ω",
            "—Å—Å—É–¥",
            "–∑–∞–µ–º",
            "–∫—Ä–µ–¥–∏—Ç",
            "–ø–æ—Å—Ç–∞–≤–∫",
            "–ø–æ–¥—Ä—è–¥",
            "—É—Å–ª—É–≥",
            "–≤–ª–∞–¥–µ–Ω",
            "–ø–æ–ª—å–∑–æ–≤–∞–Ω",
            "—Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω",
            "–≤–æ–∑–º–µ—â–µ–Ω",
            "–∫–æ–º–ø–µ–Ω—Å–∞—Ü",
            "—É—â–µ—Ä–±",
            "–≤—Ä–µ–¥",
            "—É–ø—É—â–µ–Ω–Ω",
            "–≤—ã–≥–æ–¥",
            "–º–æ—Ä–∞–ª—å–Ω",
            "–æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤",
            "–¥–µ–Ω—å–≥–∏",
            "–¥–∏–≤–∏–¥–µ–Ω–¥",
            "–Ω–µ—É—Å—Ç–æ–π–∫",
            "–ø–µ–Ω—è",
            "—à—Ç—Ä–∞—Ñ",
            "–∑–∞–¥–∞—Ç–æ–∫",
            "–∞–≤–∞–Ω—Å",
            "–ø–ª–∞—Ç–µ–∂",
            "–ø–æ—Ä—è–¥–æ–∫",
            "—Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω",
            "–ø–æ—Ä—É—á–∏—Ç–µ–ª—å—Å—Ç–≤",
            "–±–∞–Ω–∫–æ–≤—Å–∫",
            "–≥–∞—Ä–∞–Ω—Ç–∏",
            "–Ω–µ–∑–∞–≤–∏—Å–∏–º",
            "–ø—É–±–ª–∏—á–Ω",
            "–æ—Ü–µ–Ω",
            "–≤–∏–Ω–¥–∏–∫–∞—Ü",
            "–Ω–µ–≥–∞—Ç–æ—Ä–Ω",
            "–ø—Ä–∏–æ–±—Ä–µ—Ç–∞—Ç–µ–ª—å–Ω",
            "–∏—Å–∫–æ–≤–∞—è –¥–∞–≤–Ω–æ—Å—Ç",
            "—Ç–æ–≤–∞—Ä",
            "–ø—Ä–µ–¥–º–µ—Ç",
            "—Ü–µ–Ω–∞",
            "—Å—Ä–æ–∫",
            "–∏—Å–ø–æ–ª–Ω–µ–Ω",
            "—Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω",
            "–Ω–∞—Ä—É—à–µ–Ω",
            "–∏–∑–º–µ–Ω–µ–Ω",
            "–¥–æ–ø–æ–ª–Ω–µ–Ω",
            "–ø—Ä–æ–ª–æ–Ω–≥–∞—Ü",
            "–æ—Ç—á—É–∂–¥–µ–Ω",

            # –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∞–≤–æ –∏ –±–∏–∑–Ω–µ—Å
            "—É—Å—Ç–∞–≤",
            "–∫–∞–ø–∏—Ç–∞–ª",
            "—É—á—Ä–µ–¥–∏—Ç–µ–ª",
            "–∞–∫—Ü–∏–æ–Ω–µ—Ä",
            "–¥–∏–≤–∏–¥–µ–Ω–¥",
            "–ª–∏—Ü–æ",
            "–æ–±—â–µ—Å—Ç–≤–æ",
            "–ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ",
            "–∫–æ–º–ø–∞–Ω–∏—è",
            "—Ñ–∏—Ä–º–∞",
            "—Ö–æ–ª–¥–∏–Ω–≥",
            "–∫–æ—Ä–ø–æ—Ä–∞—Ü",
            "–æ–æ–æ",
            "–∞–æ",
            "–∑–∞–æ",
            "–ø–∞–æ",
            "–Ω–∞–æ",
            "—Ñ–æ–Ω–¥",
            "–Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫",
            "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü",
            "—Ä–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü",
            "–ª–∏–∫–≤–∏–¥–∞—Ü",
            "–ø—Ä–∏–±—ã–ª—å",
            "–¥–∏—Ä–µ–∫—Ç–æ—Ä",
            "—Å–æ–≤–µ—Ç",
            "–ø—Ä–∞–≤–ª–µ–Ω–∏",
            "–ø—Ä–µ–¥—Å–µ–¥–∞—Ç–µ–ª",
            "–Ω–∫–æ",
            "–±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤",
            "–ø—Ä–æ—Ü–µ–¥—É—Ä",
            "–∫–æ–Ω–∫—É—Ä—Å–Ω",
            "—É–ø—Ä–∞–≤–ª—è—é—â",
            "—Ç—Ä–µ–±–æ–≤–∞–Ω",
            "–∫—Ä–µ–¥–∏—Ç–æ—Ä",
            "–¥–æ–ª–∂–Ω–∏–∫",
            "–∞—É–¥–∏—Ç",
            "–æ—Ç—á–µ—Ç–Ω–æ—Å—Ç",
            "–±–∞–ª–∞–Ω—Å",
            "–∞–∫—Ç–∏–≤",
            "–ø–∞—Å—Å–∏–≤",
            "—Ä–µ–∑–µ—Ä–≤",
            "–∏–º—É—â–µ—Å—Ç–≤",
            "–∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü",
            "–∞–º–æ—Ä—Ç–∏–∑–∞—Ü",
            "—É—á–µ—Ç",
            "—Ñ–æ–Ω–¥",
            "—Å–∫—É–ø–∫",
            "–∞–∫—Ü–∏",
            "—É—á–∞—Å—Ç–Ω–∏–∫",
            "–≤–∫–ª–∞–¥",
            "–¥–æ–ª–µ–≤",
            "–∫–æ–Ω—Ç—Ä–æ–ª—å–Ω",
            "–º–∏–Ω–æ—Ä–∏—Ç–∞—Ä–Ω",
            "–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–µ–Ω",
            "–Ω–æ–º–∏–Ω–∞–ª—å–Ω",
            "—É—Å—Ç–∞–≤",
            "—Å–æ–±—Ä–∞–Ω–∏",
            "—Å–æ–≤–µ—Ç",
            "—Ä–µ—à–µ–Ω–∏",
            "–¥–æ—Ö–æ–¥",
            "–ø—Ä–∏–±—ã–ª—å",
            "–¥–∏–≤–∏–¥–µ–Ω–¥",
            "–∫–≤–∞—Ä—Ç–∞–ª—å–Ω",
            "–≥–æ–¥–æ–≤",
            "–±—é–¥–∂–µ—Ç",
            "–∏—Å–ø–æ–ª–Ω–µ–Ω",
            "–æ—Å–≤–æ–µ–Ω",

            # –£–≥–æ–ª–æ–≤–Ω–æ–µ –ø—Ä–∞–≤–æ
            "–ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω",
            "–ø—Ä–æ—Å—Ç—É–ø–æ–∫",
            "–ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω",
            "—É–º—ã—Å–µ–ª",
            "–Ω–µ–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç",
            "–≤–∏–Ω–∞",
            "–ø–æ–¥–æ–∑—Ä–µ–≤–∞–µ–º",
            "–æ–±–≤–∏–Ω—è–µ–º",
            "–ø–æ–¥—Å—É–¥–∏–º",
            "–æ—Å—É–∂–¥–µ–Ω–Ω",
            "—Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü",
            "—Å—É–¥–∏–º–æ—Å—Ç",
            "–Ω–∞–∫–∞–∑–∞–Ω",
            "–ª–∏—à–µ–Ω",
            "—Å–≤–æ–±–æ–¥",
            "–æ–≥—Ä–∞–Ω–∏—á–µ–Ω",
            "—Å—Ä–æ–∫",
            "–∞—Ä–µ—Å—Ç",
            "–∑–∞–∫–ª—é—á–µ–Ω",
            "–≤–æ–∑–º–µ—â–µ–Ω",
            "—É—â–µ—Ä–±",
            "–ø–æ–¥—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω",
            "—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª",
            "–¥–æ–∑–Ω–∞–≤–∞—Ç–µ–ª",
            "–æ–ø–µ—Ä",
            "–æ—Ç–¥–µ–ª",
            "–ø–æ–ª–∏—Ü",
            "–≤—ã–º–æ–≥–∞—Ç–µ–ª—å—Å—Ç–≤",
            "—à–∞–Ω—Ç–∞–∂",
            "–∏–∑–Ω–∞—Å–∏–ª–æ–≤–∞–Ω",
            "–ø–æ–±–æ–∏",
            "—É–±–∏–π—Å—Ç–≤",
            "–≥—Ä–∞–±–µ–∂",
            "—Ä–∞–∑–±–æ–π",
            "–∫—Ä–∞–∂–∞",
            "—Ö–∏—â–µ–Ω",
            "–≤–∑—è—Ç–∫",
            "–ø–æ–¥–∫—É–ø",
            "–º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤",
            "–ø—Ä–µ–≤—ã—à–µ–Ω",
            "–∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω",
            "–ø–æ–ª–Ω–æ–º–æ—á",
            "–ø–æ–¥—Å—Ç—Ä–µ–∫–∞—Ç–µ–ª—å—Å—Ç–≤",
            "–∏—Å–ø–æ–ª–Ω–µ–Ω",
            "—Å–æ—É—á–∞—Å—Ç–∏",
            "–ø–æ—Å–æ–±–Ω–∏—á–µ—Å—Ç–≤",
            "—Ä–µ—Ü–∏–¥–∏–≤",
            "–æ—Å–≤–æ–±–æ–∂–¥–µ–Ω",
            "–∫–æ–Ω—Ñ–∏—Å–∫–∞—Ü",
            "—à—Ç—Ä–∞—Ñ",
            "–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω",
            "–∏–∑–æ–ª—è—Ü–∏",
            "–æ–±—ã—Å–∫",
            "–≤—ã–µ–º–∫",
            "—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω",
            "–¥–µ–π—Å—Ç–≤–∏",
            "–æ–ø–æ–∑–Ω–∞–Ω",
            "–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü",
            "–æ—á–Ω",
            "—Å—Ç–∞–≤–∫",
            "—ç–∫—Å–ø–µ—Ä—Ç–∏–∑",
            "–∑–∞–∫–ª—é—á–µ–Ω",
            "–≤—ã–µ–∑–¥",
            "–ø—Ä–∏–±—ã—Ç",
            "—è–≤–∫",
            "–∑–∞–¥–µ—Ä–∂–∞–Ω",
            "—Å–∞–Ω–∫—Ü–∏",
            "–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω",
            "—Å—Ç–∞—Ç—å—è",
            "—á–∞—Å—Ç—å",
            "–ø—É–Ω–∫—Ç",
            "–ø—Ä–∏–º–µ—á–∞–Ω",
            "–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω",
            "–ø–æ—Å—Ç–∞—Ç–µ–π–Ω",

            # –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
            "–ø–∞—Ç–µ–Ω—Ç",
            "—Ç–æ–≤–∞—Ä–Ω",
            "–∑–Ω–∞–∫",
            "–∞–≤—Ç–æ—Ä—Å–∫",
            "—Å–º–µ–∂–Ω",
            "–∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω",
            "–ª–∏—Ü–µ–Ω–∑–∏",
            "—Å–æ–∞–≤—Ç–æ—Ä",
            "–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω",
            "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω",
            "–∫–æ–ø–∏—Ä–æ–≤–∞–Ω",
            "—Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω",
            "–ø–ª–∞–≥–∏–∞—Ç",
            "—ç–∫–∑–µ–º–ø–ª—è—Ä",
            "—Ä–æ—è–ª—Ç–∏",
            "–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω",
            "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç",
            "–∏–∑–æ–±—Ä–µ—Ç–µ–Ω",
            "–ø–æ–ª–µ–∑–Ω",
            "–º–æ–¥–µ–ª",
            "–∑–∞—â–∏—Ç",
            "–æ—Ö—Ä–∞–Ω",
            "–æ–±—ä–µ–∫—Ç",
            "—Å—É–±—ä–µ–∫—Ç",
            "–Ω–∞—Ä—É—à–µ–Ω",
            "–≤–∑—ã—Å–∫–∞–Ω",
            "–∫–æ–º–ø–µ–Ω—Å–∞—Ü",
            "–æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω",
            "–∏–Ω—Ç–µ—Ä–Ω–µ—Ç",
            "—Å–∞–π—Ç",
            "–¥–æ–º–µ–Ω",
            "–¥–∏–∑–∞–π–Ω",
            "–ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω",
            "–æ–±—Ä–∞–∑–µ—Ü",
            "–Ω–æ—É-—Ö–∞—É",
            "—Å–µ–∫—Ä–µ—Ç",
            "–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤",
            "–∫–æ–º–º–µ—Ä—á–µ—Å–∫",
            "—Ç–∞–π–Ω",
            "—Ñ–∏—Ä–º–µ–Ω–Ω",
            "–Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω",
            "—Ç–æ–≤–∞—Ä–Ω",
            "–∑–Ω–∞–∫",
            "–≥–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫",
            "—É–∫–∞–∑–∞–Ω",
            "–ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω",
            "–∞–≤—Ç–æ—Ä",
            "–ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª",
            "–∏–∑–æ–±—Ä–µ—Ç–∞—Ç–µ–ª",
            "—Å–µ–ª–µ–∫—Ü–∏–æ–Ω–Ω",
            "–¥–æ—Å—Ç–∏–∂–µ–Ω",

            # –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∞–≤–æ
            "–∂–∞–ª–æ–±",
            "–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω",
            "–≤–∑—ã—Å–∫–∞–Ω",
            "—à—Ç—Ä–∞—Ñ",
            "–ø—Ä–æ—Å—Ç—É–ø–æ–∫",
            "–ø—Ä–∞–≤–æ–Ω–∞—Ä—É—à–µ–Ω–∏",
            "–ø—Ä–æ—Ç–æ–∫–æ–ª",
            "–∞–∫—Ç",
            "–ø–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",
            "—Ä–µ—à–µ–Ω–∏",
            "–ø—Ä–µ–¥–ø–∏—Å–∞–Ω–∏",
            "–∫–æ–Ω—Ç—Ä–æ–ª",
            "–Ω–∞–¥–∑–æ—Ä",
            "—Ñ–µ–¥–µ—Ä–∞–ª—å–Ω",
            "—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω",
            "–º–µ—Å—Ç–Ω",
            "—Å–∞–º–æ—É–ø—Ä–∞–≤–ª–µ–Ω",
            "–æ—Ä–≥–∞–Ω",
            "–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω",
            "–º—É–Ω–∏—Ü–∏–ø–∞–ª—å–Ω",
            "—Å–ª—É–∂–±",
            "—á–∏–Ω–æ–≤–Ω–∏–∫",
            "–¥–æ–ª–∂–Ω–æ—Å—Ç–Ω",
            "–∏–Ω—Å–ø–µ–∫—Ç–æ—Ä",
            "–ø—Ä–æ–≤–µ—Ä–∫",
            "–ø–ª–∞–Ω–æ–≤–∞—è",
            "–≤–Ω–µ–ø–ª–∞–Ω–æ–≤–∞—è",
            "–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥",
            "—Ä–µ–≤–∏–∑–∏",
            "–∞—Ç—Ç–µ—Å—Ç–∞—Ü",
            "–ª–∏—Ü–µ–Ω–∑",
            "—Ä–∞–∑—Ä–µ—à–µ–Ω",
            "—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω",
            "—É–≤–µ–¥–æ–º–ª–µ–Ω",
            "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü",
            "–ø—Ä–æ—Ü–µ–¥—É—Ä",
            "–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü",
            "–∑–∞—è–≤–ª–µ–Ω",
            "–æ–±–∂–∞–ª–æ–≤–∞–Ω",

            # –¢—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ
            "—Ç—Ä—É–¥–æ–≤",
            "–¥–æ–≥–æ–≤–æ—Ä",
            "–∫–æ–Ω—Ç—Ä–∞–∫—Ç",
            "—Ä–∞–±–æ—Ç–Ω–∏–∫",
            "—Å–æ—Ç—Ä—É–¥–Ω–∏–∫",
            "—Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª",
            "–≥—Ä–∞—Ñ–∏–∫",
            "—Ä–µ–∂–∏–º",
            "–æ—Ç–ø—É—Å–∫",
            "–±–æ–ª—å–Ω–∏—á–Ω",
            "–ø–æ—Å–æ–±–∏",
            "–∫–æ–ª–ª–µ–∫—Ç–∏–≤–Ω",
            "–ø—Ä–æ—Ñ—Å–æ—é–∑",
            "—É–≤–æ–ª—å–Ω–µ–Ω",
            "—Å–æ–∫—Ä–∞—â–µ–Ω",
            "—à—Ç–∞—Ç",
            "–ø—Ä–∏–µ–º",
            "–ø–µ—Ä–µ–≤–æ–¥",
            "–ø–µ—Ä–µ–º–µ—â–µ–Ω",
            "–∫–æ–º–∞–Ω–¥–∏—Ä–æ–≤–∫",
            "–∑–∞—Ä–∞–±–æ—Ç–Ω",
            "–ø–ª–∞—Ç",
            "–∞–≤–∞–Ω—Å",
            "–∫–æ–º–ø–µ–Ω—Å–∞—Ü",
            "–∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü",
            "–∫–∞—Ç–µ–≥–æ—Ä",
            "—Ä–∞–∑—Ä—è–¥",
            "–¥–æ–ª–∂–Ω–æ—Å—Ç",
            "–∏–Ω—Å—Ç—Ä—É–∫—Ü",
            "—Ä–µ–≥–ª–∞–º–µ–Ω—Ç",
            "–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω",
            "–ø–æ–æ—â—Ä–µ–Ω",
            "–≤–∑—ã—Å–∫–∞–Ω",
            "–º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω",
            "–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç",
            "–∏—Å–ø—ã—Ç–∞—Ç–µ–ª—å–Ω",
            "—Å—Ä–æ–∫",
            "—Å—Ç–∞–∂",
            "–ø—Ä–æ–≥—É–ª",
            "–æ–ø–æ–∑–¥–∞–Ω",
            "–æ—Ç–≥—É–ª",
            "–ø—Ä–æ—Å—Ç–æ–π",
            "–ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫",
            "—Å–≤–µ—Ä—Ö—É—Ä–æ—á–Ω",
            "–Ω–æ—á–Ω",
            "—Ç—Ä—É–¥",
            "–≤–∞–∫–∞–Ω—Å–∏—è",
            "–≤—ã—Ö–æ–¥–Ω",
            "–æ—Ç—Ä–∞–±–æ—Ç–∫",
            "–±–æ–ª—å–Ω–∏—á–Ω",
            "–ª–∏—Å—Ç",
            "—Å—Ç—Ä–∞—Ö–æ–≤–∫",
            "–ø–µ–Ω—Å–∏–æ–Ω–Ω",
            "–Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω",
            "—Å—Ç—Ä–∞—Ö–æ–≤",
            "–ø–æ—Å–æ–±–∏",
            "–¥–µ—Ç—Å–∫",
            "–¥–µ–∫—Ä–µ—Ç–Ω",
            "–æ—Ç–ø—É—Å–∫",
            "–±–µ—Ä–µ–º–µ–Ω–Ω",
            "—Ç–∫",

            # –°–µ–º–µ–π–Ω–æ–µ –ø—Ä–∞–≤–æ
            "–±—Ä–∞–∫",
            "—Ä–∞–∑–≤–æ–¥",
            "—Å—É–ø—Ä—É–≥",
            "—Ä–∞–∑–¥–µ–ª",
            "–∏–º—É—â–µ—Å—Ç–≤",
            "–∞–ª–∏–º–µ–Ω—Ç",
            "–æ–ø–µ–∫",
            "—É—Å—ã–Ω–æ–≤–ª–µ–Ω",
            "–ø–æ–ø–µ—á–∏—Ç–µ–ª—å—Å—Ç–≤",
            "—Ä–µ–±–µ–Ω–æ–∫",
            "–¥–µ—Ç–∏",
            "—Ä–æ–¥–∏—Ç–µ–ª",
            "–º–∞—Ç—å",
            "–æ—Ç–µ—Ü",
            "–æ—Ç—Ü–æ–≤—Å—Ç–≤",
            "–º–∞—Ç–µ—Ä–∏–Ω—Å—Ç–≤",
            "–±—Ä–∞—á–Ω",
            "–¥–æ–≥–æ–≤–æ—Ä",
            "–∫–æ–Ω—Ç—Ä–∞–∫—Ç",
            "—Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤",
            "—Ä–æ–∂–¥–µ–Ω–∏",
            "—Å–º–µ—Ä—Ç",
            "–∑–∞–≥—Å",
            "–ª–∏—à–µ–Ω",
            "—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫",
            "–ø—Ä–∞–≤",
            "–ø–æ—Ä—è–¥–æ–∫",
            "–æ–±—â–µ–Ω",
            "–ø–µ–Ω—Å–∏–æ–Ω",
            "—Ñ–æ–Ω–¥",
            "–Ω–∞—á–∏—Å–ª–µ–Ω",
            "—É–¥–µ—Ä–∂–∞–Ω",
            "–¥–æ–±—Ä–æ–≤–æ–ª—å–Ω",
            "–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω",
            "–Ω–µ—É–ø–ª–∞—Ç",
            "–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç",
            "–∏–Ω–¥–µ–∫—Å–∞—Ü",
            "–ø–µ—Ä–µ—Ä–∞—Å—á–µ—Ç",
            "–æ—Ä–≥–∞–Ω–∏—á–µ–Ω",
            "–¥–µ–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç",
            "–Ω–µ–¥–µ–µ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç",
            "—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω",
            "—Å—É–¥",
            "—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏",
            "–æ—Ç–Ω–æ—à–µ–Ω",
            "—Ä–∞—Å—Ç–æ—Ä–∂–µ–Ω",
            "–±–ª–∏–∑–∫",
            "—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫",
            "–≤–æ—Å–ø–∏—Ç–∞–Ω",

            # –ñ–∏–ª–∏—â–Ω–æ–µ –ø—Ä–∞–≤–æ
            "–∂–∏–ª–∏—â–Ω",
            "–∂–∏–ª–æ–µ",
            "–ø–æ–º–µ—â–µ–Ω–∏",
            "–∫–≤–∞—Ä—Ç–∏—Ä",
            "–¥–æ–º",
            "–∫–æ–º–Ω–∞—Ç",
            "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫",
            "–Ω–∞–Ω–∏–º–∞—Ç–µ–ª—å",
            "–∞—Ä–µ–Ω–¥",
            "–Ω–∞–π–º",
            "–ø–æ–¥–Ω–∞–π–º",
            "–∂–∫—Ö",
            "–∫–æ–º–º—É–Ω–∞–ª—å–Ω",
            "—Ç–∞—Ä–∏—Ñ",
            "—É—Å–ª—É–≥",
            "—É–ø—Ä–∞–≤–ª—è—é—â",
            "–∫–æ–º–ø–∞–Ω",
            "—Ç—Å–∂",
            "—Ç–æ–≤–∞—Ä–∏—â–µ—Å—Ç–≤",
            "–∂–∏–ª–µ—Ü",
            "–ø—Ä–æ–ø–∏—Å–∫",
            "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü",
            "–≤—Ä–µ–º–µ–Ω–Ω",
            "–ø–æ—Å—Ç–æ—è–Ω–Ω",
            "–≤—ã–ø–∏—Å–∫",
            "–≤—Å–µ–ª–µ–Ω",
            "–≤—ã—Å–µ–ª–µ–Ω",
            "–ø—Ä–∏–≤–∞—Ç–∏–∑–∞—Ü",
            "–±—Ä–µ–º—è",
            "—Å–æ–¥–µ—Ä–∂–∞–Ω",
            "–∫–∞–ø–∏—Ç–∞–ª—å–Ω",
            "—Ä–µ–º–æ–Ω—Ç",
            "—Ç–µ–∫—É—â",
            "–¥–æ–ª—å—â–∏–∫",
            "–¥–æ–ª—è",
            "–Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç",
            "—Å–Ω–æ—Å",
            "–≤–µ—Ç—Ö",
            "–∞–≤–∞—Ä–∏–π–Ω",
            "–Ω–æ–≤–æ—Å—Ç—Ä–æ–π–∫",
            "–∑–∞—Å—Ç—Ä–æ–π—â–∏–∫",
            "–æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤",
            "–ø–µ—Ä–µ–¥–∞—á–∞",
            "—Ä–µ–≥–∏–Å—Ç—Ä–∞—Ü",
            "–ø–µ—Ä–µ—É—Å—Ç—É–ø–∫",
            "—É—Å—Ç—É–ø–∫",
            "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç",
            "–ø—Ä–∏–∑–Ω–∞–Ω–∏",
            "—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫",
            "–ø—Ä–æ–ø–∏—Å",
            "–ø–µ—Ä–µ–ø–ª–∞–Ω–∏—Ä–æ–≤–∫",
            "—Ä–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü",
            "–∑–∞—Å—Ç—Ä–æ–π–∫",
            "–ø–ª–∞–Ω",
            "–∑–µ–º–µ–ª—å–Ω",
            "—É—á–∞—Å—Ç–æ–∫",
            "—Å–Ω—Ç",
            "–∏–∂—Å",
            "–≥–∞–∑",
            "—ç–ª–µ–∫—Ç—Ä",
            "–≤–æ–¥–∞",
            "—Å–≤–µ—Ç",
            "—Ç–µ–ø–ª–æ—Å–Ω–∞–±–∂–µ–Ω",

            # –ó–µ–º–µ–ª—å–Ω–æ–µ –ø—Ä–∞–≤–æ
            "–∑–µ–º–µ–ª—å–Ω",
            "—É—á–∞—Å—Ç–æ–∫",
            "–∫–∞–¥–∞—Å—Ç—Ä",
            "–∑–µ–º–ª–µ—É—Å—Ç—Ä–æ–π—Å—Ç–≤",
            "–º–µ–∂–µ–≤–∞–Ω",
            "—Å–µ—Ä–≤–∏—Ç—É—Ç",
            "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∏–∫",
            "–∞—Ä–µ–Ω–¥",
            "–∞—Ä–µ–Ω–¥–∞",
            "—Å—É–±–∞—Ä–µ–Ω–¥",
            "—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç",
            "–∫–∞—Ç–µ–≥–æ—Ä",
            "—Ä–∞–∑—Ä–µ—à–µ–Ω–Ω",
            "–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω",
            "–∑–æ–Ω–∏—Ä–æ–≤–∞–Ω",
            "—Å–Ω—Ç",
            "–¥–Ω–ø",
            "–∏–∂—Å",
            "–ª–ø—Ö",
            "—Ü–µ–ª–µ–≤",
            "—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü",
            "–ø–µ—Ä–µ–≤–æ–¥",
            "—Å–¥–µ–ª–∫",
            "–≥—Ä–∞–Ω–∏—Ü",
            "—Å–º–µ–∂–Ω",
            "–ø–∞–π",
            "–¥–æ–ª—è",
            "–ø–æ–ª—å–∑–æ–≤–∞–Ω",
            "–±–µ—Å—Å—Ä–æ—á–Ω",
            "–≤—Ä–µ–º–µ–Ω–Ω",
            "–æ–≥—Ä–∞–∂–¥–µ–Ω",
            "–∑–∞–º–µ–Ω–µ–Ω",
            "—É—â–µ—Ä–±",
            "–∫–æ–º–ø–µ–Ω—Å–∞—Ü",
            "–ø–ª–∞–Ω–∏—Ä–æ–≤–∫",
            "–∑–∞—Å—Ç—Ä–æ–π–∫",

            # –ù–∞–ª–æ–≥–æ–≤–æ–µ –ø—Ä–∞–≤–æ
            "–Ω–∞–ª–æ–≥",
            "—Å–±–æ—Ä",
            "–≤–∑–Ω–æ—Å",
            "–¥–µ–∫–ª–∞—Ä–∞—Ü",
            "–≤—ã—á–µ—Ç",
            "–Ω–¥—Å",
            "–Ω–¥—Ñ–ª",
            "–ø—Ä–∏–±—ã–ª—å",
            "–∏–º—É—â–µ—Å—Ç–≤",
            "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω",
            "–∑–µ–º–µ–ª—å–Ω",
            "–∞–∫—Ü–∏–∑",
            "–∏–Ω–Ω",
            "–∫–ø–ø",
            "—Å–Ω–∏–ª—Å",
            "–æ–≥—Ä–Ω",
            "–Ω–∞–ª–æ–≥–æ–≤",
            "–æ—Ä–≥–∞–Ω",
            "–∏–Ω—Å–ø–µ–∫—Ü",
            "—É–∫–ª–æ–Ω–µ–Ω",
            "–æ–ø—Ç–∏–º–∏–∑–∞—Ü",
            "–ª—å–≥–æ—Ç",
            "–≤–æ–∑–≤—Ä–∞—Ç",
            "–ø–µ—Ä–µ–ø–ª–∞—Ç",
            "–∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç",
            "–ø–µ–Ω—è",
            "—à—Ç—Ä–∞—Ñ",
            "–Ω–µ–≤—ã–ø–ª–∞—Ç",
            "–¥–æ–Ω–∞—á–∏—Å–ª–µ–Ω",
            "—É–≤–µ–¥–æ–º–ª–µ–Ω",
            "—Ç—Ä–µ–±–æ–≤–∞–Ω",
            "–ø—Ä–æ–≤–µ—Ä–∫",
            "–≤—ã–µ–∑–¥–Ω",
            "–∫–∞–º–µ—Ä–∞–ª—å–Ω",
            "–ø–∞—Ç–µ–Ω—Ç",
            "—É—Å–Ω",
            "–æ—Å–Ω–æ",
            "–µ–Ω–≤–¥",
            "–µ—Å—Ö–Ω",
            "—Å–∞–º–æ–∑–∞–Ω—è—Ç",
            "–∏–ø",

            # –ó–∞–∫–æ–Ω—ã –∏ –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∞–∫—Ç—ã (–ø–æ –Ω–æ–º–µ—Ä–∞–º)
            "44-—Ñ–∑",
            "44 —Ñ–∑",
            "223-—Ñ–∑",
            "223 —Ñ–∑",
            "214-—Ñ–∑",
            "214 —Ñ–∑",
            "229-—Ñ–∑",
            "229 —Ñ–∑",
            "230-—Ñ–∑",
            "230 —Ñ–∑",
            "259-—Ñ–∑",
            "259 —Ñ–∑",
            "263-—Ñ–∑",
            "263 —Ñ–∑",
            "290-—Ñ–∑",
            "290 —Ñ–∑",
            "353-—Ñ–∑",
            "353 —Ñ–∑",
            "94-—Ñ–∑",
            "94 —Ñ–∑",
            "115-—Ñ–∑",
            "115 —Ñ–∑",
            "127-—Ñ–∑",
            "127 —Ñ–∑",
            "62-—Ñ–∑",
            "62 —Ñ–∑",
            "131-—Ñ–∑",
            "131 —Ñ–∑",
            "152-—Ñ–∑",
            "152 —Ñ–∑",
            "273-—Ñ–∑",
            "273 —Ñ–∑",
            "53-—Ñ–∑",
            "53 —Ñ–∑",
            "79-—Ñ–∑",
            "79 —Ñ–∑",
            "7-—Ñ–∑",
            "7 —Ñ–∑",

            # –°–æ–∫—Ä–∞—â–µ–Ω–∏—è –∫–æ–¥–µ–∫—Å–æ–≤
            "–≥–∫",
            "–≥–∫ —Ä—Ñ",
            "–≥–ø–∫",
            "–≥–ø–∫ —Ä—Ñ",
            "—É–ø–∫",
            "—É–ø–∫ —Ä—Ñ",
            "—É–∫",
            "—É–∫ —Ä—Ñ",
            "–∫–∞—Å",
            "–∫–∞—Å —Ä—Ñ",
            "–∫–æ–∞–ø",
            "–∫–æ–∞–ø —Ä—Ñ",
            "—Ç–∫",
            "—Ç–∫ —Ä—Ñ",
            "–∂–∫",
            "–∂–∫ —Ä—Ñ",
            "–∑–∫",
            "–∑–∫ —Ä—Ñ",
            "–±–∫",
            "–±–∫ —Ä—Ñ",
            "–Ω–∫",
            "–Ω–∫ —Ä—Ñ",
            "–∞–ø–∫",
            "–∞–ø–∫ —Ä—Ñ",
            "—Å–∫",
            "—Å–∫ —Ä—Ñ",
            "–≤–æ–∑–¥—É—à–Ω—ã–π –∫–æ–¥–µ–∫—Å",
            "–≤–æ–¥–Ω—ã–π –∫–æ–¥–µ–∫—Å",
            "–ª–µ—Å–Ω–æ–π –∫–æ–¥–µ–∫—Å",
            "–≥—Ä–∞–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥–µ–∫—Å",
            "—Ç–∞–º–æ–∂–µ–Ω–Ω—ã–π –∫–æ–¥–µ–∫—Å",

            # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã
            "—é—Ä–ª–∏—Ü–æ",
            "—Ñ–∏–∑–ª–∏—Ü",
            "–≥—Ä–∞–∂–¥–∞–Ω–∏–Ω",
            "–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏",
            "—Ñ–≥—É–ø",
            "–∞—Å—Ç—Ä–µ–Ω—Ç",
            "–ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤",
            "–∑–∞—â–∏—Ç",
            "–∏–Ω—Ç–µ—Ä–µ—Å",
            "—Ä–µ–∑–∏–¥–µ–Ω—Ç",
            "–Ω–µ—Ä–µ–∑–∏–¥–µ–Ω—Ç",
            "–¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω",
            "—É–ø—Ä–∞–≤–ª–µ–Ω",
            "–¥–æ–≤–µ—Ä",
            "–ª–∏—Ü",
            "—á–∞—Å—Ç–Ω",
            "–ø—É–±–ª–∏—á–Ω",
            "—á–∞—Å—Ç–Ω–æ-–≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω",
            "–ø–∞—Ä—Ç–Ω–µ—Ä—Å—Ç–≤",
            "–∫–æ–Ω—Ü–µ—Å—Å–∏",
            "–ø—Ä–∏–∫–∞–∑–Ω",
            "–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤",
            "—Å–≤–æ",
            "–∫–æ–º–±–∞—Ç",
            "—Å–ø–µ—Ü–∏–∞–ª—å–Ω",
            "–≤–æ–µ–Ω–Ω",
            "–æ–ø–µ—Ä–∞—Ü",
            "–º–æ–±–∏–ª–∏–∑–∞—Ü",
            "—á–∞—Å—Ç–∏—á–Ω",
            "–ø–æ–ª–Ω",
            "–ø—Ä–∏–∑—ã–≤–Ω–∏–∫",
            "—é—Ä–∏–¥–∏—á–µ—Å–∫",
            "—Ñ–∞–∫—Ç",
            "–ø—Ä–∏—Å—è–≥",
            "–≤–æ–π—Å–∫",
            "–∫–æ–º–∏—Å—Å–∞—Ä",
            "—Ä–≤–∫",
            "–≤–æ–µ–Ω–∫–æ–º–∞—Ç",
            "–≤—É–∑",
            "—Å—Ç—É–¥–µ–Ω—Ç",
            "–æ—Ç—Å—Ä–æ—á–∫",
            "–¥–∏—Å—Ç–∞–Ω—Ü",
            "–º–æ—Ä–∞–ª—å–Ω–æ-—ç—Ç–∏—á–µ—Å–∫",
            "–∞—Å–ø–µ–∫—Ç",
            "–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω",
            "–∞–Ω—Ç–∏–∫–æ—Ä—Ä—É–ø—Ü"
        ]

        # –°–ø–∏—Å–æ–∫ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –æ–±—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
        general_patterns = [
            # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
            "–ø—Ä–∏–≤–µ—Ç",
            "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π",
            "–¥–æ–±—Ä—ã–π –¥–µ–Ω—å",
            "–¥–æ–±—Ä–æ–µ —É—Ç—Ä–æ",
            "–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä",
            "–∑–¥–æ—Ä–æ–≤–æ",
            "—Ö–∞–π",
            "–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é",
            "—Å–∞–ª—é—Ç",
            "–¥–æ–±—Ä–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏",
            "—Ö–µ–ª–ª–æ—É",
            "–∫—É",
            "—Ö–æ–ª–∞",
            "–π–æ—É",
            "–≤–µ—á–µ—Ä –¥–æ–±—Ä—ã–π",

            # –û —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–µ
            "–∫–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç",
            "–∫—Ç–æ —Ç—ã",
            "—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å",
            "—á—Ç–æ —Ç—ã –º–æ–∂–µ—à—å",
            "—á–µ–º —Ç—ã –∑–∞–Ω–∏–º–∞–µ—à—å—Å—è",
            "—Ä–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ",
            "–∫–∞–∫ –Ω–∞–∑—ã–≤–∞–µ—à—å—Å—è",
            "–∫—Ç–æ —Ç–µ–±—è —Å–æ–∑–¥–∞–ª",
            "–∫—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª",
            "—Ç–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏",
            "—Ç–≤–æ—è –≤–µ—Ä—Å–∏—è",
            "—Ç–≤–æ–∏ —Ñ—É–Ω–∫—Ü–∏–∏",
            "—Ç—ã —Ä–æ–±–æ—Ç",
            "—Ç—ã –±–æ—Ç",
            "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç",
            "–Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å",
            "–±–æ–ª—å—à–∞—è —è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å",
            "–∫–æ–≥–¥–∞ —Ç–µ–±—è —Å–æ–∑–¥–∞–ª–∏",
            "–≥–¥–µ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è",
            "—Ç–≤–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫",

            # –í–æ–ø—Ä–æ—Å—ã –æ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–∏
            "–∫–∞–∫ –¥–µ–ª–∞",
            "–∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ",
            "–∫–∞–∫ –∂–∏–∑–Ω—å",
            "–∫–∞–∫ —Ç—ã",
            "–≤—Å–µ —Ö–æ—Ä–æ—à–æ",
            "—á—Ç–æ –Ω–æ–≤–æ–≥–æ",
            "–∫–∞–∫ –ø–æ–∂–∏–≤–∞–µ—à—å",
            "–∫–∞–∫ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å",
            "–∫–∞–∫ —Ç–≤–æ–∏ –¥–µ–ª–∞",

            # –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏
            "—Å–ø–∞—Å–∏–±–æ",
            "–±–ª–∞–≥–æ–¥–∞—Ä—é",
            "—Å–ø—Å",
            "–ø–∞—Å–∏–±",
            "—Å–µ–Ω–∫—Å",
            "–±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω",
            "–±–ª–∞–≥–æ–¥–∞—Ä–Ω–∞",
            "–º–µ—Ä—Å–∏",
            "–ø—Ä–∏–∑–Ω–∞—Ç–µ–ª–µ–Ω",
            "–±–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ",
            "–æ—Ç –¥—É—à–∏",
            "—Ü–µ–Ω—é",
            "—Ä–µ—Å–ø–µ–∫—Ç",

            # –§—Ä–∞–∑—ã –ø—Ä–æ—â–∞–Ω–∏—è
            "–ø–æ–∫–∞",
            "–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è",
            "—É–≤–∏–¥–∏–º—Å—è",
            "–≤—Å–µ–≥–æ –¥–æ–±—Ä–æ–≥–æ",
            "–¥–æ –≤—Å—Ç—Ä–µ—á–∏",
            "–±—ã–≤–∞–π",
            "—É–¥–∞—á–∏",
            "–ø—Ä–æ—â–∞–π",
            "–¥–æ —Å–∫–æ—Ä–æ–≥–æ",
            "–ø–æ–∫–µ–¥–∞",
            "–±—É–¥—å –∑–¥–æ—Ä–æ–≤",
            "–ø–æ–∫–µ–¥–æ–≤–∞",
            "—á–∞–æ",

            # –ö–æ–º–ø–ª–∏–º–µ–Ω—Ç—ã –∏ –æ—Ü–µ–Ω–∫–∏
            "–º–æ–ª–æ–¥–µ—Ü",
            "–æ—Ç–ª–∏—á–Ω–æ",
            "—Ö–æ—Ä–æ—à–æ",
            "—Å—É–ø–µ—Ä",
            "–∫–ª–∞—Å—Å",
            "–∫—Ä—É—Ç–æ",
            "–Ω–µ–ø–ª–æ—Ö–æ",
            "–ø—Ä–µ–∫—Ä–∞—Å–Ω–æ",
            "–∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ",
            "–ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω–æ",
            "–±–ª–µ—Å—Ç—è—â–µ",
            "–≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ",
            "–ø–æ—Ç—Ä—è—Å–∞—é—â–µ",
            "—É–º–Ω–∏—Ü–∞",
            "—à–∏–∫–∞—Ä–Ω–æ",
            "–±—Ä–∞–≤–æ",
            "–≤–ø–µ—á–∞—Ç–ª—è–µ—Ç",
            "–æ–≥–æ–Ω—å",
            "–±–æ–º–±–∞",

            # –ò–∑–≤–∏–Ω–µ–Ω–∏—è –∏ —Å–æ–∂–∞–ª–µ–Ω–∏—è
            "–∏–∑–≤–∏–Ω–∏",
            "–ø—Ä–æ—Å—Ç–∏",
            "—Å–æ—Ä—Ä–∏",
            "–≤–∏–Ω–æ–≤–∞—Ç",
            "–ø—Ä–æ—à—É –ø—Ä–æ—â–µ–Ω–∏—è",
            "–º–Ω–µ –∂–∞–ª—å",
            "—Å–æ–∂–∞–ª–µ—é",
            "–Ω–µ —Ö–æ—Ç–µ–ª",
            "–º–æ—è –æ—à–∏–±–∫–∞",
            "–º–æ–π –∫–æ—Å—è–∫",
            "–Ω–µ –æ–±–∏–∂–∞–π—Å—è",
            "–∏–∑–≤–∏–Ω—è—é—Å—å",

            # –°–æ–≥–ª–∞—Å–∏–µ/–Ω–µ—Å–æ–≥–ª–∞—Å–∏–µ
            "—Å–æ–≥–ª–∞—Å–µ–Ω",
            "–Ω–µ —Å–æ–≥–ª–∞—Å–µ–Ω",
            "—Ç–∞–∫ —Ç–æ—á–Ω–æ",
            "–æ—Ç–ª–∏—á–Ω–æ",
            "–Ω–µ–≤–µ—Ä–Ω–æ",
            "–ø—Ä–∞–≤–∏–ª—å–Ω–æ",
            "–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ",
            "–≤–µ—Ä–Ω–æ",
            "—Å–æ–≥–ª–∞—à—É—Å—å",
            "–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é",
            "–∫–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –Ω–µ—Ç",

            # –í–æ–ø—Ä–æ—Å—ã –æ –º–æ–¥–µ–ª–∏
            "–∫–∞–∫—É—é –Ω–µ–π—Ä–æ—Å–µ—Ç—å",
            "–∫–∞–∫–æ–π –Ω–µ–π—Ä–æ–Ω–Ω–æ–π",
            "–∫–∞–∫–æ–π llm",
            "–∫–∞–∫–∞—è –º–æ–¥–µ–ª—å",
            "–Ω–∞ —á–µ–º —Ä–∞–±–æ—Ç–∞–µ—à—å",
            "–Ω–∞ –∫–∞–∫–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏",
            "–Ω–∞ –∫–∞–∫–æ–π –æ—Å–Ω–æ–≤–µ",
            "–Ω–∞ –∫–∞–∫–æ–º —è–∑—ã–∫–µ",
            "deepseek",
            "claude",
            "gpt",
            "—Ç–æ–∫–µ–Ω—ã",
            "–∫–æ–Ω—Ç–µ–∫—Å—Ç",
            "–æ–±—É—á–µ–Ω–∏–µ",
            "—è–∑—ã–∫–æ–≤–∞—è –º–æ–¥–µ–ª—å",
            "–∏–∏",
            "–∞–∏",
            "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π",
            "ai",
            "—Å–∫–æ–ª—å–∫–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤",
            "—Ç–≤–æ—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
            "transformer",
            "—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä",

            # –ö–æ—Ä–æ—Ç–∫–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
            "–æ–∫",
            "—è—Å–Ω–æ",
            "–ø–æ–Ω—è–ª",
            "–ø–æ–Ω—è—Ç–Ω–æ",
            "–¥–∞",
            "–Ω–µ—Ç",
            "–∫–æ–Ω–µ—á–Ω–æ",
            "—Ä–∞–∑—É–º–µ–µ—Ç—Å—è",
            "–≤–æ–∑–º–æ–∂–Ω–æ",
            "–∏–º–µ–Ω–Ω–æ",
            "–Ω–∞–≤–µ—Ä–Ω–æ–µ",
            "–≤–µ—Ä–æ—è—Ç–Ω–æ",
            "–æ—á–µ–≤–∏–¥–Ω–æ",
            "–ª–æ–≥–∏—á–Ω–æ",
            "–±–µ–∑—É—Å–ª–æ–≤–Ω–æ",

            # –ü—Ä–æ—Å—å–±—ã –æ –ø–æ–º–æ—â–∏
            "–ø–æ–º–æ–≥–∏",
            "–ø–æ–¥—Å–∫–∞–∂–∏",
            "–ø–æ–º–æ—â—å",
            "–ø–æ–¥–¥–µ—Ä–∂–∫–∞",
            "–Ω–µ –ø–æ–Ω–∏–º–∞—é",
            "–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç",
            "–æ–±—ä—è—Å–Ω–∏",
            "—Ä–∞–∑—ä—è—Å–Ω–∏",
            "—É—Ç–æ—á–Ω–∏",
            "–∫–∞–∫ –º–Ω–µ",
            "—á—Ç–æ –¥–µ–ª–∞—Ç—å",
            "–∫–∞–∫ –±—ã—Ç—å",

            # –£–∫–∞–∑–∞–Ω–∏—è –Ω–∞ –æ—à–∏–±–∫–∏
            "–æ—à–∏–±–∫–∞",
            "—Ç—ã –æ—à–∏–±–∞–µ—à—å—Å—è",
            "—ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ",
            "–æ—à–∏–±—Å—è",
            "–Ω–µ —Ç–∞–∫",
            "–Ω–µ—Ç–æ—á–Ω–æ",
            "–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ",
            "–Ω–µ–ø—Ä–∞–≤–¥–∞",
            "–ø—É—Ç–∞–µ—à—å",
            "–∑–∞–±–ª—É–∂–¥–∞–µ—à—å—Å—è",

            # –ü—Ä–æ—Å—å–±—ã –æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–∏
            "–ø—Ä–æ–¥–æ–ª–∂–∞–π",
            "–¥–∞–ª—å—à–µ",
            "—á—Ç–æ –µ—â–µ",
            "–∏ —á—Ç–æ",
            "–µ—â–µ",
            "—Ä–∞—Å—Å–∫–∞–∂–∏ –±–æ–ª—å—à–µ",
            "–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ",
            "–¥–∞–ª—å–Ω–µ–π—à–µ–µ",
            "—Å–ª–µ–¥—É—é—â–µ–µ",
            "—á—Ç–æ –ø–æ—Ç–æ–º",
            "–∞ –∑–∞—Ç–µ–º"
        ]

        # –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã
        for term in legal_terms:
            # –ï—Å–ª–∏ —Ç–µ—Ä–º–∏–Ω –∫–æ—Ä–æ—Ç–∫–∏–π (–º–µ–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤), —Ç—Ä–µ–±—É–µ–º —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–ª–æ–≤–∞, –∞ –Ω–µ —á–∞—Å—Ç–∏
            if len(term) < 3:
                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ª–∏ —Ç–µ—Ä–º–∏–Ω –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ
                words = query_lower.split()
                if term in words:
                    self.logger.log(f"–ù–∞–π–¥–µ–Ω —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω: {term}", LogLevel.INFO)
                    return False
            # –î–ª—è –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –ø—Ä–∏–º–µ–Ω—è–µ–º –æ–±—ã—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
            elif term in query_lower:
                self.logger.log(f"–ù–∞–π–¥–µ–Ω —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π —Ç–µ—Ä–º–∏–Ω: {term}", LogLevel.INFO)
                return False

        # –ï—Å–ª–∏ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è–µ–º –æ–±—â–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
        for pattern in general_patterns:
            if pattern in query_lower:
                self.logger.log(f"–ù–∞–π–¥–µ–Ω –æ–±—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω: {pattern}", LogLevel.INFO)
                return True

        # –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π (–º–µ–Ω–µ–µ 3 —Å–ª–æ–≤), —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —ç—Ç–æ –æ–±—â–∏–π –∑–∞–ø—Ä–æ—Å
        if len(query_lower.split()) < 3 and len(query_lower) < 15:
            self.logger.log("–ó–∞–ø—Ä–æ—Å –∫–æ—Ä–æ—Ç–∫–∏–π, —Å—á–∏—Ç–∞–µ–º –æ–±—â–∏–º", LogLevel.INFO)
            return True

        # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—á–∏—Ç–∞–µ–º –∑–∞–ø—Ä–æ—Å –æ–±—â–∏–º, –µ—Å–ª–∏ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª–æ—Å—å, —á—Ç–æ –æ–Ω —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π
        self.logger.log("–ó–∞–ø—Ä–æ—Å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π, —Å—á–∏—Ç–∞–µ–º –æ–±—â–∏–º", LogLevel.INFO)
        return True

    def get_response_content(self, response):
        """
        –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å content –∏ reasoning_content –∏–∑ –æ—Ç–≤–µ—Ç–∞ DeepSeek (dict –∏–ª–∏ –æ–±—ä–µ–∫—Ç).
        """
        try:
            # dict-—Å—Ç–∏–ª—å
            if isinstance(response, dict):
                content = response["choices"][0]["message"]["content"]
                reasoning_content = response["choices"][0]["message"].get("reasoning_content")
            else:
                # –æ–±—ä–µ–∫—Ç-—Å—Ç–∏–ª—å
                content = response.choices[0].message.content
                reasoning_content = getattr(response.choices[0].message, "reasoning_content", None)
            return content, reasoning_content
        except Exception as e:
            self.logger.log(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞–∑–±–æ—Ä–µ –æ—Ç–≤–µ—Ç–∞ DeepSeek: {str(e)}", LogLevel.ERROR)
            return "–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –º–æ–¥–µ–ª–∏.", None

    async def research(
        self, 
        query: str, 
        context: Optional[str] = None, 
        is_general: Optional[bool] = None, 
        chat_history: Optional[str] = None, 
        search_data: Optional[dict] = None
    ) -> ResearchResult:
        try:
            if is_general is None:
                is_general = self.is_general_query(query)
                self.logger.log(f"üìù –û–ø—Ä–µ–¥–µ–ª–µ–Ω —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞: {'–æ–±—â–∏–π' if is_general else '—é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π'}", LogLevel.INFO)

            if is_general:
                self.logger.log("üìù –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—â–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞", LogLevel.INFO)
                messages = [
                    {"role": "system", "content": GENERAL_SYSTEM_PROMPT},
                    {"role": "user", "content": query}
                ]
                response = await self.deepseek_service.chat_completion(messages)
                content, reasoning_content = self.get_response_content(response)
                return ResearchResult(
                    query=query,
                    analysis=content,
                    timestamp=self._get_timestamp(),
                    reasoning_content=reasoning_content
                )

            if search_data is None:
                self.logger.log("‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞", LogLevel.WARNING)
                search_data = {}

            es_block = self._format_es_results(search_data.get('elasticsearch', []))
            tavily_block = self._format_tavily_results([query], [search_data.get('tavily', [])])
            chat_block = self._format_chat_history(chat_history) if chat_history else ""

            research_prompt = self._build_research_prompt(
                query=query,
                es_block=es_block,
                es_by_tavily_block="",
                tavily_block=tavily_block,
                chat_block=chat_block
            )

            messages = [
                {"role": "system", "content": RESEARCH_SYSTEM_PROMPT},
                {"role": "user", "content": research_prompt}
            ]
            response = await self.deepseek_service.chat_completion(messages)
            content, reasoning_content = self.get_response_content(response)
            return ResearchResult(
                query=query,
                analysis=content,
                timestamp=self._get_timestamp(),
                reasoning_content=reasoning_content
            )

        except Exception as e:
            self.logger.log(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è: {str(e)}", LogLevel.ERROR)
            return ResearchResult(
                query=query,
                analysis="–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞.",
                error=str(e),
                timestamp=self._get_timestamp()
            )

    def _format_es_results(self, results: List[Dict]) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ElasticSearch."""
        if not results:
            return "–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞."
        
        formatted = []
        for r in results:
            # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–ª—è
            text = ensure_correct_encoding(str(r.get("text", "")))
            title = ensure_correct_encoding(str(r.get("title", "")))
            metadata = r.get("metadata", {})
            score = r.get("_score", 0)
            highlights = r.get("highlight", {})
            
            if text:
                # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                result_parts = []
                
                # –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫, –µ—Å–ª–∏ –µ—Å—Ç—å
                if title:
                    result_parts.append(f"–î–æ–∫—É–º–µ–Ω—Ç: {title}")
                
                # –î–æ–±–∞–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç
                result_parts.append(f"–¢–µ–∫—Å—Ç: {text}")
                
                # –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–¥—Å–≤–µ—á–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã, –µ—Å–ª–∏ –µ—Å—Ç—å
                if highlights:
                    highlight_text = "\n".join(highlights.get("text", []))
                    if highlight_text:
                        result_parts.append(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã: {highlight_text}")
                
                # –î–æ–±–∞–≤–ª—è–µ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                if metadata:
                    meta_parts = []
                    if metadata.get("law_name"):
                        meta_parts.append(f"–ó–∞–∫–æ–Ω: {metadata['law_name']}")
                    if metadata.get("article"):
                        meta_parts.append(f"–°—Ç–∞—Ç—å—è: {metadata['article']}")
                    if metadata.get("section"):
                        meta_parts.append(f"–†–∞–∑–¥–µ–ª: {metadata['section']}")
                    if metadata.get("date"):
                        meta_parts.append(f"–î–∞—Ç–∞: {metadata['date']}")
                    if meta_parts:
                        result_parts.append("–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:\n" + "\n".join(meta_parts))
                
                # –î–æ–±–∞–≤–ª—è–µ–º –æ—Ü–µ–Ω–∫—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
                result_parts.append(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {score:.2f}")
                
                # –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —á–∞—Å—Ç–∏
                formatted.append("\n".join(result_parts))
        
        # –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å _score)
        if any("–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å:" in r for r in formatted):
            formatted.sort(
                key=lambda x: float(x.split("–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å:")[-1].strip() or "0"),
                reverse=True
            )
        
        # –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–ø-10 —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        formatted = formatted[:10]
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –º–µ–∂–¥—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
        final_text = "\n\n" + "=" * 80 + "\n\n".join(formatted)
        
        # –û–±—Ä–µ–∑–∞–µ–º –¥–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–æ–π –¥–ª–∏–Ω—ã
        if len(final_text) > 15000:
            final_text = truncate_text_intelligently(final_text, 15000)
        
        return final_text
        
    def _format_tavily_results(self, queries: List[str], results: List[List[Dict]]) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã Tavily."""
        if not queries or not results:
            self.logger.log("‚ùå –ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ Tavily –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è", LogLevel.WARNING)
            return "–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤."
            
        self.logger.log(f"üì• –ü–æ–ª—É—á–µ–Ω–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {len(queries)}", LogLevel.INFO)
        self.logger.log(f"üì• –ü–æ–ª—É—á–µ–Ω–æ —Å–ø–∏—Å–∫–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {len(results)}", LogLevel.INFO)
        
        blocks = []
        for i, (query, result_list) in enumerate(zip(queries, results)):
            self.logger.log(f"üìù –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ {i+1}: {query}", LogLevel.INFO)
            self.logger.log(f"üìä –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: {len(result_list)}", LogLevel.INFO)
            
            if result_list:
                # –°–æ—Ä—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (score)
                sorted_results = sorted(
                    result_list,
                    key=lambda x: float(x.get("score", 0)),
                    reverse=True
                )
                
                formatted_results = []
                for r in sorted_results:
                    title = r.get("title", "").strip()
                    body = r.get("body", "").strip()
                    url = r.get("href", "").strip()
                    source = r.get("source", "").strip()
                    score = r.get("score", 0)
                    metadata = r.get("metadata", {})
                    
                    if body:  # –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
                        # –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
                        result_parts = []
                        if title:
                            result_parts.append(f"–ó–∞–≥–æ–ª–æ–≤–æ–∫: {title}")
                        result_parts.append(f"–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: {body}")
                        if url:
                            result_parts.append(f"–ò—Å—Ç–æ—á–Ω–∏–∫: {url}")
                        if source:
                            result_parts.append(f"–î–æ–º–µ–Ω: {source}")
                        
                        # –î–æ–±–∞–≤–ª—è–µ–º –≤–∞–∂–Ω—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                        if metadata:
                            if metadata.get("published_date"):
                                result_parts.append(f"–î–∞—Ç–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏: {metadata['published_date']}")
                            if metadata.get("word_count"):
                                result_parts.append(f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤: {metadata['word_count']}")
                        
                        # –î–æ–±–∞–≤–ª—è–µ–º –æ—Ü–µ–Ω–∫—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
                        result_parts.append(f"–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å: {score:.2f}")
                        
                        formatted_results.append("\n".join(result_parts))
                
                if formatted_results:
                    # –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ —Ç–æ–ø-5 –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
                    content = "\n\n".join(formatted_results[:5])
                    blocks.append(f"–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ '{query}':\n{content}")
            
        if not blocks:
            return "–ù–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤."
            
        final_text = "\n\n" + "=" * 80 + "\n\n".join(blocks)
        self.logger.log(f"‚úÖ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –†–∞–∑–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: {len(final_text)} —Å–∏–º–≤–æ–ª–æ–≤", LogLevel.INFO)
        return final_text
        
    def _format_chat_history(self, history: str) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞."""
        if not history:
            return ""
            
        # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª–∏–Ω—É –∏—Å—Ç–æ—Ä–∏–∏
        return history[:5000]
        
    def _format_es_results_by_tavily(self, queries: list, results_by_query: list) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã ElasticSearch –ø–æ —É—Ç–æ—á–Ω—ë–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º Tavily."""
        if not queries or not results_by_query:
            return "–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —É—Ç–æ—á–Ω—ë–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º."
        blocks = []
        for i, (query, results) in enumerate(zip(queries, results_by_query)):
            content = "\n".join([
                ensure_correct_encoding(str(r.get("text", "")))
                for r in results
            ])[:8000]
            blocks.append(f"–£—Ç–æ—á–Ω—ë–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å {i+1}: {query}\n{content}")
        return "\n\n".join(blocks)

    def _build_research_prompt(
        self,
        query: str,
        es_block: str,
        es_by_tavily_block: str,
        tavily_block: str,
        chat_block: str
    ) -> str:
        """
        –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è.
        –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ—Å—Ç–∏ –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.
        """
        parts = []
        
        # 1. –î–æ–±–∞–≤–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å
        parts.append(f"–ó–ê–ü–†–û–° –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø:\n{query}\n")
        
        # 2. –î–æ–±–∞–≤–ª—è–µ–º –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞, –µ—Å–ª–∏ –µ—Å—Ç—å
        if chat_block:
            parts.append(f"–ò–°–¢–û–†–ò–Ø –î–ò–ê–õ–û–ì–ê:\n{chat_block}\n")
        
        # 3. –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–µ
        if es_block and es_block != "–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞.":
            parts.append(f"–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê –í –ó–ê–ö–û–ù–û–î–ê–¢–ï–õ–¨–°–¢–í–ï:\n{es_block}\n")
        
        # 4. –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ —É—Ç–æ—á–Ω—ë–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º
        if es_by_tavily_block and es_by_tavily_block != "–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ —É—Ç–æ—á–Ω—ë–Ω–Ω—ã–º –∑–∞–ø—Ä–æ—Å–∞–º.":
            parts.append(f"–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–ó –ó–ê–ö–û–ù–û–î–ê–¢–ï–õ–¨–°–¢–í–ê:\n{es_by_tavily_block}\n")
        
        # 5. –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ
        if tavily_block and tavily_block != "–ù–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.":
            parts.append(f"–†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê –í –ò–ù–¢–ï–†–ù–ï–¢–ï:\n{tavily_block}\n")
        
        # 6. –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –º–æ–¥–µ–ª–∏
        parts.append("""
–ò–ù–°–¢–†–£–ö–¶–ò–ò –ü–û –ê–ù–ê–õ–ò–ó–£:
1. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –Ω–æ—Ä–º—ã –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–∞–π–¥–µ–Ω—ã
2. –ó–∞—Ç–µ–º –∏–∑—É—á–∏ —Å—É–¥–µ–±–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É –∏ –ø—Ä–∞–≤–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
3. –°–æ–ø–æ—Å—Ç–∞–≤—å –Ω–æ—Ä–º–∞—Ç–∏–≤–Ω—É—é –±–∞–∑—É —Å –ø—Ä–∞–∫—Ç–∏–∫–æ–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
4. –°—Ñ–æ—Ä–º—É–ª–∏—Ä—É–π –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç, –æ–ø–∏—Ä–∞—è—Å—å –Ω–∞:
   - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã –ø—Ä–∞–≤–∞
   - –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—É–¥–µ–±–Ω—É—é –ø—Ä–∞–∫—Ç–∏–∫—É
   - –ø—Ä–∞–≤–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –∏–∑ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
5. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º:
   - –ö—Ä–∞—Ç–∫–æ–µ —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑—é–º–µ
   - –ê–Ω–∞–ª–∏–∑ –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö –Ω–æ—Ä–º –ø—Ä–∞–≤–∞
   - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è —Å—É–¥–µ–±–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞
   - –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –ü—Ä–∞–≤–æ–≤—ã–µ —Ä–∏—Å–∫–∏
   - –í—ã–≤–æ–¥—ã
""")
        
        # –û–±—ä–µ–¥–∏–Ω—è–µ–º –≤—Å–µ —á–∞—Å—Ç–∏ —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è–º–∏
        return "\n" + "=" * 80 + "\n\n".join(parts)

    def read_document(self, file_path: str) -> Optional[str]:
        """
        –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
            
        Args:
            file_path: –ü—É—Ç—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç—É
                    
        Returns:
            –¢–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–ª–∏ None –≤ —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏
        """
        try:
            self.logger.log(
                f"[DeepResearch #{self.usage_counter}] –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞: {file_path}", LogLevel.INFO
            )
            extracted_text = extract_text_from_any_document(file_path)

            if extracted_text:
                self.logger.log(
                    f"[DeepResearch #{self.usage_counter}] –£—Å–ø–µ—à–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω —Ç–µ–∫—Å—Ç ({len(extracted_text)} —Å–∏–º–≤–æ–ª–æ–≤)", LogLevel.INFO
                )
                # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π, –æ–±—Ä–µ–∑–∞–µ–º –µ–≥–æ
                max_length = 30000
                if len(extracted_text) > max_length:
                    extracted_text = extracted_text[:max_length] + "...[—Ç–µ–∫—Å—Ç –æ–±—Ä–µ–∑–∞–Ω –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ä–∞–∑–º–µ—Ä–∞]"

                return extracted_text

            return None
        except Exception as e:
            self.logger.log(
                f"[DeepResearch #{self.usage_counter}] –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞ {file_path}: {str(e)}", LogLevel.ERROR
            )
            return None

    def _get_timestamp(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –º–µ—Ç–∫—É –≤—Ä–µ–º–µ–Ω–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤."""
        return datetime.now().strftime("%Y%m%d_%H%M%S")

    def _get_current_time(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ ISO —Ñ–æ—Ä–º–∞—Ç–µ."""
        return datetime.now().isoformat()
